{"context":{"s":"something"},"level":"error","message":"An equivalent index already exists with the same name but different options. Requested index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }, existing index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { name: 1, username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }","name":"MongoServerError","stack":"MongoServerError: An equivalent index already exists with the same name but different options. Requested index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }, existing index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { name: 1, username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }\n    at Connection.onMessage (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:202:26)\n    at MessageStream.<anonymous> (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:61:60)\n    at MessageStream.emit (node:events:514:28)\n    at processIncomingData (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:124:16)\n    at MessageStream._write (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:33:9)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)"}
{"code":85,"context":{"action":"Initialize search Indexes","indexes":["searchUsername","searchEmail"]},"level":"error","message":"An equivalent index already exists with the same name but different options. Requested index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }, existing index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { name: 1, username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }","name":"MongoServerError","stack":"MongoServerError: An equivalent index already exists with the same name but different options. Requested index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }, existing index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { name: 1, username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }\n    at Connection.onMessage (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:202:26)\n    at MessageStream.<anonymous> (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:61:60)\n    at MessageStream.emit (node:events:514:28)\n    at processIncomingData (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:124:16)\n    at MessageStream._write (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:33:9)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)"}
{"context":{"s":"something"},"level":"error","message":"An equivalent index already exists with the same name but different options. Requested index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }, existing index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { name: 1, username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }","name":"MongoServerError","stack":"MongoServerError: An equivalent index already exists with the same name but different options. Requested index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }, existing index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { name: 1, username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }\n    at Connection.onMessage (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:202:26)\n    at MessageStream.<anonymous> (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:61:60)\n    at MessageStream.emit (node:events:514:28)\n    at processIncomingData (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:124:16)\n    at MessageStream._write (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:33:9)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)"}
{"code":85,"context":{"action":"Initialize search Indexes","indexes":["searchUsername","searchEmail"]},"level":"error","message":"An equivalent index already exists with the same name but different options. Requested index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }, existing index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { name: 1, username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }","name":"MongoServerError","stack":"MongoServerError: An equivalent index already exists with the same name but different options. Requested index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }, existing index: { v: 2, unique: true, key: { _fts: \"text\", _ftsx: 1 }, name: \"search\", weights: { name: 1, username: 1 }, default_language: \"english\", language_override: \"language\", textIndexVersion: 3 }\n    at Connection.onMessage (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:202:26)\n    at MessageStream.<anonymous> (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:61:60)\n    at MessageStream.emit (node:events:514:28)\n    at processIncomingData (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:124:16)\n    at MessageStream._write (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:33:9)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)"}
{"code":6047401,"context":{"action":"Search username","viperId":"65a703b9ddc9f34ec84e1913"},"level":"error","message":"$search stage is only allowed on MongoDB Atlas","name":"MongoServerError","stack":"MongoServerError: $search stage is only allowed on MongoDB Atlas\n    at Connection.onMessage (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:202:26)\n    at MessageStream.<anonymous> (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:61:60)\n    at MessageStream.emit (node:events:514:28)\n    at processIncomingData (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:124:16)\n    at MessageStream._write (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:33:9)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)"}
{"code":6047401,"context":{"action":"Search username","viperId":"65a703b9ddc9f34ec84e1913"},"level":"error","message":"$search stage is only allowed on MongoDB Atlas","name":"MongoServerError","stack":"MongoServerError: $search stage is only allowed on MongoDB Atlas\n    at Connection.onMessage (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:202:26)\n    at MessageStream.<anonymous> (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/connection.js:61:60)\n    at MessageStream.emit (node:events:514:28)\n    at processIncomingData (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:124:16)\n    at MessageStream._write (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/cmap/message_stream.js:33:9)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)"}
{"cause":{},"context":{"action":"Initialize repositories","database":"viperDb"},"level":"error","message":"connect ECONNREFUSED 127.0.0.1:27017","name":"MongoServerSelectionError","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at EventTarget.<anonymous> (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/sdam/topology.js:276:34)\n    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:807:20)\n    at EventTarget.dispatchEvent (node:internal/event_target:742:26)\n    at abortSignal (node:internal/abort_controller:369:10)\n    at TimeoutController.abort (node:internal/abort_controller:391:5)\n    at Timeout.<anonymous> (/home/hueso/code/viper/viper-v2/node_modules/mongodb/lib/utils.js:1010:92)\n    at listOnTimeout (node:internal/timers:573:17)\n    at process.processTimers (node:internal/timers:514:7)"}
